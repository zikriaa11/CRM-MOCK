<!DOCTYPE html>
<html>
<head>
<title>Ghouri CRM - Freddy's Express</title>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #f3f5f8;
}

.topbar {
  background: #111;
  color: white;
  padding: 15px;
  font-size: 20px;
  font-weight: bold;
}

.container {
  padding: 20px;
}

.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 15px;
}

button {
  background: #111;
  color: white;
  padding: 8px 14px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

button:hover { background: #333; }

table {
  width: 100%;
  border-collapse: collapse;
  background: white;
  margin-top: 10px;
}

th, td {
  padding: 10px;
  border-bottom: 1px solid #ddd;
  text-align: left;
}

th {
  background: #222;
  color: white;
}

/* MODAL */
.modal {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.5);
}

.modal-content {
  background: white;
  width: 420px;
  margin: 6% auto;
  padding: 20px;
  border-radius: 6px;
}

.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}

.modal-header span {
  font-size: 22px;
  cursor: pointer;
}

input, select {
  width: 100%;
  padding: 8px;
  margin-bottom: 8px;
  border: 1px solid #ccc;
  border-radius: 4px;
}
</style>
</head>

<body>

<div class="topbar">ðŸ“Š Ghouri CRM | Freddy's Express</div>

<div class="container">
  <div class="header">
    <h2>Customer Database</h2>
    <button onclick="openModal()">+ Add Data</button>
  </div>

  <table id="dataTable">
    <thead>
      <tr>
        <th>Name</th>
        <th>Mobile</th>
        <th>Type</th>
        <th>Platform</th>
        <th>Address</th>
        <th>City</th>
        <th>Date</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<!-- MODAL -->
<div class="modal" id="modal">
  <div class="modal-content">
    <div class="modal-header">
      <h3>Data Collection</h3>
      <span onclick="closeModal()">Ã—</span>
    </div>

    <select id="orderType">
      <option>Delivery</option>
      <option>Collection</option>
      <option>Query</option>
    </select>

    <input id="day" placeholder="Day">
    <input id="shop" value="Freddy's Express">
    <input id="platform" placeholder="Platform (Phone, Walk-in)">
    <input id="date" placeholder="Date">
    <input id="mobile" placeholder="Mobile Number">
    <input id="range" placeholder="Range">
    <input id="name" placeholder="Customer Name">
    <input id="amount" placeholder="Total Amount">
    <input id="address1" placeholder="Address Line 1">
    <input id="address2" placeholder="Address Line 2">
    <input id="city" placeholder="City">
    <input id="postcode" placeholder="Postcode">
    <input id="country" placeholder="Country">

    <button onclick="saveData()">Save</button>
  </div>
</div>

<script>
// OPEN MODAL
function openModal() {
  document.getElementById("modal").style.display = "block";
}
function closeModal() {
  document.getElementById("modal").style.display = "none";
}

// STORAGE
let records = JSON.parse(localStorage.getItem("crmData")) || [];

// RENDER TABLE
function renderTable() {
  const table = document.querySelector("#dataTable tbody");
  table.innerHTML = "";

  records.forEach(r => {
    table.innerHTML += `
      <tr>
        <td>${r.name}</td>
        <td>${r.mobile}</td>
        <td>${r.type}</td>
        <td>${r.platform}</td>
        <td>${r.address}</td>
        <td>${r.city}</td>
        <td>${r.date}</td>
      </tr>
    `;
  });
}

renderTable();

// SAVE DATA
function saveData() {
  const data = {
    type: orderType.value,
    day: day.value,
    platform: platform.value,
    mobile: mobile.value,
    name: name.value,
    date: date.value,
    city: city.value,
    address: address1.value + ", " + address2.value,
  };

  if (!data.name || !data.mobile) {
    alert("Name and mobile required!");
    return;
  }

  records.push(data);
  localStorage.setItem("crmData", JSON.stringify(records));
  renderTable();
  closeModal();
}
</script>

</body>
</html>
